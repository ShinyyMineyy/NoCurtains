<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NoCurtains</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="noise-overlay"></div>
    
    <header>
        <h1 class="logo">NoCurtains.</h1>
        <p class="subtitle">RESTRICTED ACCESS // DATABASE ENTRY</p>
    </header>

    <main>
        <nav class="tabs">
            <button class="tab-btn active" data-tab="videos">[ VIDEO_FOOTAGE ]</button>
            <button class="tab-btn" data-tab="pictures">[ PICTURES ]</button>
        </nav>
        
        <div id="media-grid" class="grid-container">
            </div>

        <div id="media-modal" class="modal hidden">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <div id="modal-body"></div>
            </div>
        </div>
    </main>

    <script>
        // --- 1. TYPE YOUR EXACT FILE NAMES HERE ---
        const myVideos = [
            "Dancinglady.mp4",
            "LostLady.mp4"
        ];

        // To fix the pictures tab, type the exact names of the files you uploaded to assets/pictures/
        const myPictures = [
            // "example_photo1.jpg",
            // "creepy_hallway.png"
        ];

        // --- THE LOGIC ---
        let currentTab = 'videos';
        const gridContainer = document.getElementById('media-grid');
        const tabButtons = document.querySelectorAll('.tab-btn');
        
        const modal = document.getElementById('media-modal');
        const modalBody = document.getElementById('modal-body');
        const closeBtn = document.querySelector('.close-btn');

        function renderMedia(category) {
            gridContainer.innerHTML = ''; 
            
            const fileList = category === 'videos' ? myVideos : myPictures;
            const folderPath = category === 'videos' ? 'assets/videos/' : 'assets/pictures/';

            if (fileList.length === 0) {
                gridContainer.innerHTML = '<p style="color: #444; text-align: center; grid-column: 1/-1;">[ NO ASSETS LOGGED IN SYSTEM ]</p>';
                return;
            }

            fileList.forEach(fileName => {
                const card = document.createElement('div');
                card.className = 'media-card';

                let cleanTitle = fileName.substring(0, fileName.lastIndexOf('.')) || fileName;
                let fullPath = folderPath + fileName; 

                let mediaElement = category === 'videos' 
                    ? `<video muted loop playsinline preload="metadata"><source src="${fullPath}" type="video/mp4"></video>`
                    : `<img src="${fullPath}" alt="${cleanTitle}" loading="lazy">`;

                card.innerHTML = `
                    ${mediaElement}
                    <div class="media-info">
                        <span class="media-title">${cleanTitle}</span>
                    </div>
                `;
                gridContainer.appendChild(card);

                // --- HOVER PREVIEW LOGIC (VIDEOS ONLY) ---
                if (category === 'videos') {
                    const vid = card.querySelector('video');
                    let previewInterval;

                    card.addEventListener('mouseenter', () => {
                        let playPromise = vid.play();
                        if (playPromise !== undefined) {
                            playPromise.catch(e => console.log("Autoplay blocked:", e));
                        }
                        
                        // Jumps around the timeline to create the "snapshot" effect
                        previewInterval = setInterval(() => {
                            if (vid.duration) {
                                vid.currentTime = Math.random() * vid.duration;
                            }
                        }, 800);
                    });

                    card.addEventListener('mouseleave', () => {
                        clearInterval(previewInterval);
                        vid.pause();
                        vid.currentTime = 0; 
                    });
                }

                // --- POP-UP CLICK LOGIC ---
                card.addEventListener('click', () => {
                    modal.classList.remove('hidden');
                    
                    if (category === 'videos') {
                        modalBody.innerHTML = `<video src="${fullPath}" controls autoplay></video>`;
                    } else {
                        modalBody.innerHTML = `<img src="${fullPath}" alt="${cleanTitle}">`;
                    }
                });
            });
        }

        // Close Pop-up
        function closeModal() {
            modal.classList.add('hidden');
            modalBody.innerHTML = ''; 
        }

        closeBtn.addEventListener('click', closeModal);
        
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });

        // Tab Switching
        tabButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                tabButtons.forEach(btn => btn.classList.remove('active'));
                e.target.classList.add('active');
                currentTab = e.target.getAttribute('data-tab');
                renderMedia(currentTab);
            });
        });

        // Boot up
        renderMedia(currentTab);
    </script>
</body>
</html>
